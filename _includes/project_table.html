{% assign article_totals = 0 %}

<!-- TODO: fill with calculations -->

{% assign headings = "Project,Tags,Article Count" | split: "," %}
{% assign footings = "Totals,,{{article_totals}}" | split: "," %}

<table class="display">
  {% include table_header.html headings=headings %}

  <tbody>
    {% assign sorted_pages = (site.pages | sort: 'title') %}
    {% for index in sorted_pages %}
      {% if index.url contains page.url and index.url != page.url %}
      <tr>
        <td>
          <!-- Project Link -->
          <a href="{{ index.url | relative_url }}">{{ index.title }}</a>
        </td>
        <td>
          <!-- Project Tags -->
          {% if index.tags %}
            {{ index.tags | sort | join: ", " }}
          {% endif %}
        </td>
        <td>
          <!-- Project Article Counts -->
          {% assign i = 0 %}
          {% for post in site.posts %}
            {% if post.url contains index.url %}
              {% assign i = i | plus:1 %}
            {% endif %}
          {% endfor %}
          {{ i }}
          {% assign article_totals = article_totals | plus:i %}
        </td>
      </tr>
      {% endif %}
    {% endfor %}
  </tbody>


</table>
